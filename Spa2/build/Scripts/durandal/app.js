define(["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,i,r){function a(){return e.defer(function(t){return 0==u.length?(t.resolve(),void 0):(e.acquire(u).then(function(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.install){var a=s[i];e.isObject(a)||(a={}),r.install(a),e.log("Plugin:Installed "+u[i])}else e.log("Plugin:Loaded "+u[i])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var o,u=[],s=[];return o={title:"Application",configurePlugins:function(t,n){var i=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<i.length;r++){var a=i[r];u.push(n+a),s.push(t[a])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){r(function(){a().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(i,r,a){var o,u={activate:!0,transition:r};o=!a||e.isString(a)?document.getElementById(a||"applicationHost"):a,e.isString(i)?t.isViewUrl(i)?u.view=i:u.model=i:u.model=i,n.compose(o,u)}},i.includeIn(o),o});