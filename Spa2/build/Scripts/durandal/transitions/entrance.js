define(["durandal/system","durandal/composition","jquery"],function(e,t,n){var i=100,r={marginRight:0,marginLeft:0,opacity:1},o={marginLeft:"",marginRight:"",opacity:"",display:""},a=function(t){return e.defer(function(e){function a(){e.resolve()}function u(){t.keepScrollPosition||n(document).scrollTop(0)}function s(){u(),t.triggerAttach();var e={marginLeft:c?"0":"20px",marginRight:c?"0":"-20px",opacity:0,display:"block"},i=n(t.child);i.css(e),i.animate(r,l,"swing",function(){i.css(o),a()})}if(t.child){var l=t.duration||500,c=!!t.fadeOnly;t.activeView?n(t.activeView).fadeOut(i,s):s()}else n(t.activeView).fadeOut(i,a)}).promise()};return a});